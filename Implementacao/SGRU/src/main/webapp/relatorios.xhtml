<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"      
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:composition template="padraoInternoCliente.xhtml">
        <ui:define name="titulo">SGRU</ui:define>
        <ui:define name="conteudo">       
            <h:form>
                <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                    <p:outputLabel for="somTipoRelatorio" value="Tipo de Relatório:"/>
                    <p:selectOneRadio id="somTipoRelatorio" value="Compras" style="width: 250px"> 
                        <f:selectItem itemLabel="Compras" itemValue="Compras"/>                           
                        <f:selectItem itemLabel="Recargas" itemValue="Recargas"/>
                        <p:ajax event="change" listener="#{relatorioBean.alterarStatusFormaPgto()}" update="somFormaPagamento"/>
                    </p:selectOneRadio>
                    
                    <p:outputLabel for="somFormaPagamento" value="Forma de Pagamento:"
                                   rendered="#{relatorioBean.habilitarComponentesGerenciais(autenticarBean.controlador.pessoa)}"/>
                    <p:selectOneRadio id="somFormaPagamento" value="Cartao"
                                      style="width: 235px"
                                      rendered="#{relatorioBean.habilitarComponentesGerenciais(autenticarBean.controlador.pessoa)}"
                                      disabled="#{!relatorioBean.relatorioCompras}">
                        <f:selectItem itemLabel="Cartão" itemValue="Cartao"/>                        
                        <f:selectItem itemLabel="Ticket" itemValue="Ticket"/>                        
                    </p:selectOneRadio>
                    <p:outputLabel for="somTipoUsuario" value="Tipo de Usuário:"
                                   rendered="#{relatorioBean.habilitarComponentesGerenciais(autenticarBean.controlador.pessoa)}"/>
                    <p:selectOneMenu id="somTipoUsuario"
                                     style="width: 190px"
                                     rendered="#{relatorioBean.habilitarComponentesGerenciais(autenticarBean.controlador.pessoa)}"
                                     value="#{relatorioBean.idCodTipoCliente}">
                        <f:selectItem itemLabel="Todos" itemValue="-1" noSelectionOption="true"/>
                        <f:selectItems var="tipoUsuario" value="#{relatorioBean.lstTipoCliente}" itemLabel="#{tipoUsuario.descricao}" itemValue="#{tipoUsuario.id}"/>
                        <p:ajax event="change" update="somUsuario"/>
                    </p:selectOneMenu>
                    <p:outputLabel for="somUsuario" value="Usuário:"
                                   rendered="#{relatorioBean.habilitarComponentesGerenciais(autenticarBean.controlador.pessoa)}"/>
                    <p:selectOneMenu id="somUsuario"                                       
                                     style="width: 190px"
                                     rendered="#{relatorioBean.habilitarComponentesGerenciais(autenticarBean.controlador.pessoa)}">                                     
                        <f:selectItem itemLabel="Todos" itemValue="Todos" noSelectionOption="true"/>
                        <f:selectItems var="usuario" value="#{relatorioBean.lstClientes}" itemLabel="#{usuario.nome}" itemValue="#{usuario.matricula}"/>
                    </p:selectOneMenu>
                    <p:outputLabel for="dataInicial" value="Data Inicial:"/>
                    <p:calendar id="dataInicial"                                
                                pattern="dd/MM/yyyy"
                                maxdate="#{relatorioBean.dataInicialMax}" 
                                mindate="#{relatorioBean.dataInicialMin}">                                
                        <p:ajax event="dateSelect" listener="#{relatorioBean.tratarDataInicial}" update="dataFinal"/>
                    </p:calendar>                                    
                    <p:outputLabel for="dataFinal" value="Data Final:"/>
                    <p:calendar id="dataFinal"                                
                                pattern="dd/MM/yyyy"
                                maxdate="#{relatorioBean.dataFinalMax}" 
                                mindate="#{relatorioBean.dataFinalMin}">
                        <p:ajax event="dateSelect" listener="#{relatorioBean.tratarDataFinal}" update="dataInicial"/>
                    </p:calendar>
                </h:panelGrid>
                <p:commandButton ajax="false" value="Emitir Relatório" action="#{relatorioBean.EmitirRelatorio}"/>
            </h:form>
        </ui:define>
    </ui:composition>
</html>

